<div {{ attributes }} class="max-w-xl mx-auto">
    {{ form_start(form, {
        attr: {'data-action': 'submit->live#action:prevent', 'data-live-action-param': 'save'},
    }) }}
        <twig:Field:Set>
            <twig:Field:Legend>API Credentials</twig:Field:Legend>
            <twig:Field:Description>Keep them secret!</twig:Field:Description>
            <twig:Field:Group>
                <twig:Dialog id="show_credentials">
                    <twig:Dialog:Trigger>
                        <twig:Button as="a" href="javascript:void(0)" variant="outline" {{ ...trigger_attrs }}>
                            <twig:ux:icon name="lucide:eye" />
                            Show the credentials
                        </twig:Button>
                    </twig:Dialog:Trigger>
                    <twig:Dialog:Content class="text-white max-w-2xl w-full">
                        {{ form_row(form.androidId) }}
                        {{ form_row(form.deviceToken) }}
                        {{ form_row(form.securityKey) }}
                        {{ form_row(form.deviceSecret) }}
                        <twig:Dialog:Footer class="sm:justify-between!">
                            <twig:Button
                                as="a"
                                href="javascript:void(0)"
                                variant="destructive"
                                data-action="live#action"
                                data-live-action-param="regenerateCredentials"
                            >
                                <twig:ux:icon name="lucide:trash" />
                                Regenerate
                            </twig:Button>
                            <twig:Dialog:Close>
                                <twig:Button type="button" variant="outline" {{ ...close_attrs }}>
                                    Close
                                </twig:Button>
                            </twig:Dialog:Close>
                        </twig:Dialog:Footer>
                    </twig:Dialog:Content>
                </twig:Dialog>
            </twig:Field:Group>
        </twig:Field:Set>

        <twig:Separator  class="my-12"/>

        <twig:Field:Set>
            <twig:Field:Legend>Notifications</twig:Field:Legend>
            <twig:Field:Description>Stay tuned!</twig:Field:Description>
            <twig:Field:Group>
               <div class="flex flex-col gap-3">
                   {{ form_label(form.discordWebhook) }}

                   <div class="flex flex-row items-center gap-x-2">
                       {{ form_widget(form.discordWebhook, {
                           row_attr: {
                               class: 'grow',
                           },
                       }) }}
                       <twig:Button
                           as="a"
                           variant="default"
                           data-action="live#action"
                           data-live-action-param="testDiscordWebhook"
                       >
                           <twig:ux:icon name="lucide:loader-circle" class="animate-spin" data-loading="show" />
                           <span data-loading="hide">Test</span>
                       </twig:Button>
                   </div>

                   {{ form_errors(form.discordWebhook) }}
               </div>
            </twig:Field:Group>
        </twig:Field:Set>

        <twig:Separator  class="my-12"/>

        <twig:Button type="submit" variant="outline" class="w-full">Save</twig:Button>
    {{ form_end(form) }}
</div>
